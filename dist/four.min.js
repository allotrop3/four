/* Four 0.2.0 | Jason Petersen (@allotrop3) | MIT Licensed */
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}};!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){c.glMatrix=a("./gl-matrix/common.js"),c.mat2=a("./gl-matrix/mat2.js"),c.mat2d=a("./gl-matrix/mat2d.js"),c.mat3=a("./gl-matrix/mat3.js"),c.mat4=a("./gl-matrix/mat4.js"),c.quat=a("./gl-matrix/quat.js"),c.vec2=a("./gl-matrix/vec2.js"),c.vec3=a("./gl-matrix/vec3.js"),c.vec4=a("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":2,"./gl-matrix/mat2.js":3,"./gl-matrix/mat2d.js":4,"./gl-matrix/mat3.js":5,"./gl-matrix/mat4.js":6,"./gl-matrix/quat.js":7,"./gl-matrix/vec2.js":8,"./gl-matrix/vec3.js":9,"./gl-matrix/vec4.js":10}],2:[function(a,b,c){var d={};d.EPSILON=1e-6,d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,d.RANDOM=Math.random,d.setMatrixArrayType=function(a){GLMAT_ARRAY_TYPE=a};var e=Math.PI/180;d.toRadian=function(a){return a*e},b.exports=d},{}],3:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},b.exports=e},{"./common.js":2}],4:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},b.exports=e},{"./common.js":2}],5:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},b.exports=e},{"./common.js":2}],6:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.mul=e.multiply,e.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},b.exports=e},{"./common.js":2}],7:[function(a,b,c){var d=a("./common.js"),e=a("./mat3.js"),f=a("./vec3.js"),g=a("./vec4.js"),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return-.999999>i?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},b.exports=h},{"./common.js":2,"./mat3.js":5,"./vec3.js":9,"./vec4.js":10}],8:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},b.exports=e},{"./common.js":2}],9:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},b.exports=e},{"./common.js":2}],10:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){
return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},b.exports=e},{"./common.js":2}],11:[function(a,b,c){var d=a("./gl"),e=a("./Entity"),f="attribute",g=d.FLOAT,h=!1,i=0,j=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,e=a.attribute,j=a.length,k=a.format,l=void 0===k?g:k,m=a.normalized,n=void 0===m?h:m,o=a.offset,p=void 0===o?i:o;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.attribute=e,this.location=void 0,this.length=j,this.format=l,this.normalized=n,this.offset=p,this.inheritance=["Entity","Attribute"]}return _inherits(b,a),_createClass(b,[{key:"getByteCount",value:function(a){return this.length*a}},{key:"locate",value:function(a){return this.location=d.getAttribLocation(a.buffer,"a_"+this.attribute)}},{key:"enable",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=this.locate(a);d.enableVertexAttribArray(c),d.vertexAttribPointer(c,this.length,this.format,this.normalized,b,this.offset)}},{key:"disable",value:function(){d.disableVertexAttribArray(this.location)}},{key:"attribute",get:function(){return this._attribute},set:function(a){this._attribute=a}},{key:"location",get:function(){return this._location},set:function(a){this._location=a}},{key:"length",get:function(){return this._length},set:function(a){this._length=a}},{key:"format",get:function(){return this._format},set:function(a){this._format=a}},{key:"normalized",get:function(){return this._normalized},set:function(a){this._normalized=a}},{key:"offset",get:function(){return this._offset},set:function(a){this._offset=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=j},{"./Entity":19,"./gl":46}],12:[function(a,b,c){var d=a("./Structure"),e="bloom",f=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d})}return _inherits(b,a),b}(d);b.exports=f},{"./Structure":40}],13:[function(a,b,c){var d=a("./gl"),e=a("gl-matrix"),f=e.mat4,g=e.mat3,h=a("./utils/LSL"),i=a("./Structure"),j={x:[1,0,0],y:[0,1,0],z:[0,0,1]},k=.0174532925,l="camera",m="camera",n=["mat4 projectionMatrix","mat4 modelViewMatrix","mat3 normalMatrix"],o=0,p=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?l:c,e=a.path,h=void 0===e?m:e,i=a.uniforms,j=void 0===i?n:i,k=a.background,p=void 0===k?o:k;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:h,uniforms:j}),this.background=p,this.modelViewMatrix=f.create(),this.projectionMatrix=f.create(),this.normalMatrix=g.create(),this.stack=[],this.inheritance=["Entity","Structure","Camera"]}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){d.enable(d.CULL_FACE),d.frontFace(d.CCW),d.clearColor.apply(d,this.background.concat(1))}},{key:"bind",value:function(a){g.normalFromMat4(this.normalMatrix,this.modelViewMatrix),_get(Object.getPrototypeOf(b.prototype),"bind",this).call(this,a)}},{key:"save",value:function(){var a=f.clone(this.modelViewMatrix);this.stack.push(a)}},{key:"restore",value:function(){var a=this.stack;if(a.length){var b=a.pop();f.copy(this.modelViewMatrix,b)}}},{key:"scale",value:function(a,b,c){var d=this.modelViewMatrix;f.scale(d,d,arguments)}},{key:"scaleX",value:function(a){this.scale(a,1,1)}},{key:"scaleY",value:function(a){this.scale(1,a,1)}},{key:"scaleZ",value:function(a){this.scale(1,1,a)}},{key:"rotate",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"y":arguments[1],c=this.modelViewMatrix,d=a*k;f.rotate(c,c,d,j[b])}},{key:"rotateX",value:function(a){this.rotate(a,"x")}},{key:"rotateY",value:function(a){this.rotate(a,"y")}},{key:"rotateZ",value:function(a){this.rotate(a,"z")}},{key:"translate",value:function(a,b,c){var d=this.modelViewMatrix;f.translate(d,d,arguments)}},{key:"translateX",value:function(a){this.translate(a,0,0)}},{key:"translateY",value:function(a){this.translate(0,a,0)}},{key:"translateZ",value:function(a){this.translate(0,0,a)}},{key:"background",get:function(){return this._background},set:function(a){this._background=h(a)}},{key:"modelViewMatrix",get:function(){return this._modelViewMatrix},set:function(a){this._modelViewMatrix=a}},{key:"projectionMatrix",get:function(){return this._projectionMatrix},set:function(a){this._projectionMatrix=a}},{key:"normalMatrix",get:function(){return this._normalMatrix},set:function(a){this._normalMatrix=a}},{key:"stack",get:function(){return this._stack},set:function(a){this._stack=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(i);b.exports=p},{"./Structure":40,"./gl":46,"./utils/LSL":56,"gl-matrix":1}],14:[function(a,b,c){var d=a("./gl"),e=a("./Texture"),f="data.texture",g=null,h=4,i=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,e=a.image,i=void 0===e?g:e,j=a.lod,k=a.width,l=a.height,m=a.length,n=void 0===m?h:m,o=a.components,p=a.format,q=a.magnification,r=a.minification,s=a.S,t=a.T;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,lod:j,components:o,format:p,magnification:q,minification:r,S:s,T:t}),this.image=i,this.width=k,this.height=l,this.length=n,this.inheritance=["Entity","Texture","DataTexture"],this.autofill(),this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){_get(Object.getPrototypeOf(b.prototype),"configure",this).call(this);var a=this.components,c=this.image;c instanceof Array&&(d.pixelStorei(d.PACK_ALIGNMENT,1),d.pixelStorei(d.UNPACK_ALIGNMENT,1),d.getExtension("OES_texture_float"),c=new Float32Array(c)),d.texImage2D(d.TEXTURE_2D,this.lod,a,this.width,this.height,0,a,this.format,c),this.unbind()}},{key:"autofill",value:function(){var a=this.image;if(a instanceof Array){var b=this.width*this.height*this.length-a.length,c=Array.from(new Array(b),function(){return-1});this.image=a.concat(c)}}},{key:"image",get:function(){return this._image},set:function(a){this._image=a}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}},{key:"length",get:function(){return this._length},set:function(a){this._length=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=i},{"./Texture":41,"./gl":46}],15:[function(a,b,c){var d=a("./gl"),e=a("./Framebuffer"),f="deferred.framebuffer",g=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,e=void 0===c?f:c,g=a.colorAttachment,h=a.depthAttachment,i=a.flushable;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:e,flushable:i}),this.buffer=d.createFramebuffer(),this.colorAttachment=g,this.depthAttachment=h,this.inheritance=["Entity","Framebuffer","DeferredFramebuffer"],this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){this.bind(!1),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this.colorAttachment.buffer,0),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,this.depthAttachment.buffer),this.check(),this.unbind()}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"colorAttachment",get:function(){return this._colorAttachment},set:function(a){this._colorAttachment=a}},{key:"depthAttachment",get:function(){return this._depthAttachment},set:function(a){this._depthAttachment=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=g},{"./Framebuffer":21,"./gl":46}],16:[function(a,b,c){var d=a("./gl"),e=a("./Framebuffer"),f="depth.framebuffer",g=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,e=void 0===c?f:c,g=a.colorAttachment,h=a.depthAttachment,i=a.flushable;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:e,flushable:i}),this.buffer=d.createFramebuffer(),this.colorAttachment=g,this.depthAttachment=h,this.inheritance=["Entity","Framebuffer","DepthFramebuffer"],this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){this.bind(!1),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this.colorAttachment.buffer,0),d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,this.depthAttachment.buffer,0),this.check(),this.unbind()}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"colorAttachment",get:function(){return this._colorAttachment},set:function(a){this._colorAttachment=a}},{key:"depthAttachment",get:function(){return this._depthAttachment},set:function(a){this._depthAttachment=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=g},{"./Framebuffer":21,"./gl":46}],17:[function(a,b,c){var d=a("./gl"),e=a("./Texture"),f="depth.texture",g=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,e=void 0===c?f:c,g=a.width,h=a.height;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:e}),this.buffer=d.createTexture(),this.width=g,this.height=h,this.inheritance=["Entity","Texture","DepthTexture"],this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){_get(Object.getPrototypeOf(b.prototype),"configure",this).call(this),d.getExtension("WEBGL_depth_texture"),d.texImage2D(d.TEXTURE_2D,0,d.DEPTH_COMPONENT,this.width,this.height,0,d.DEPTH_COMPONENT,d.UNSIGNED_INT,null),this.unbind()}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=g},{"./Texture":41,"./gl":46}],18:[function(a,b,c){var d=a("./Light"),e="directional.light",f=["vec3 ambient","vec3 diffuse","vec3 specular","f intensity","vec3 location","vec3 direction","i type"],g=[0,0,0],h=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c,h=a.path,i=a.uniforms,j=void 0===i?f:i,k=a.ambient,l=a.diffuse,m=a.specular,n=a.intensity,o=a.location,p=a.direction,q=void 0===p?g:p;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:h,uniforms:j,ambient:k,diffuse:l,specular:m,intensity:n,location:o}),this.direction=q,this.type=1,this.inheritance=["Entity","Structure","Light","DirectionalLight"]}return _inherits(b,a),_createClass(b,[{key:"direction",get:function(){return this._direction},set:function(a){this._direction=a}},{key:"type",get:function(){return this._type},set:function(a){this._type=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=h},{"./Light":24}],19:[function(a,b,c){var d={},e="entity",f=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=b.name,d=void 0===c?e:c;_classCallCheck(this,a),this.name=d,this.basename=d,this.inheritance=["Entity"]}return _createClass(a,[{key:"is",value:function(a){return null!==this.name.match(a,"i")}},{key:"isType",value:function(a){return-1!==this.inheritance.indexOf(a)}},{key:"name",get:function(){return this._name},set:function(a){void 0===d[a]&&(d[a]=-1),d[a]++,this._name=a+".0"+d[a]}},{key:"basename",get:function(){return this._basename},set:function(a){this._basename=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),a}();b.exports=f},{}],20:[function(a,b,c){var d=(a("./gl"),a("./Shader")),e="x-shader/x-fragment",f="fragment.shader",g="FRAGMENT_SHADER",h=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,h=a.selector;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,selector:h+'[type="'+e+'"]'},g),this.inheritance=["Entity","Shader","FragmentShader"]}return _inherits(b,a),_createClass(b,[{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=h},{"./Shader":37,"./gl":46}],21:[function(a,b,c){var d=a("./gl"),e=a("./Entity"),f="framebuffer",g=!0,h=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,e=a.flushable,h=void 0===e?g:e;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.buffer=null,this.flushable=h,this.inheritance=["Entity","Framebuffer"]}return _inherits(b,a),_createClass(b,[{key:"bind",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];d.bindFramebuffer(d.FRAMEBUFFER,this.buffer),this.flushable&&a&&this.flush()}},{key:"unbind",value:function(){d.bindFramebuffer(d.FRAMEBUFFER,null)}},{key:"flush",value:function(){d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}},{key:"check",value:function(){var a=d.checkFramebufferStatus(d.FRAMEBUFFER),b=!1;switch(a){case d.FRAMEBUFFER_UNSUPPORTED:b="unsupported";break;case d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:b="attachments incomplete";break;case d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:b="dimensions incomplete";break;case d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:b="attachment missing"}if(b)throw d.deleteFramebuffer(this.buffer),new Error(b)}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"flushable",get:function(){return this._flushable},set:function(a){this._flushable=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=h},{"./Entity":19,"./gl":46}],22:[function(a,b,c){var d=a("./Entity"),e="geometry",f=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.vertices=[],this.colors=[],this.normals=[],this.indices=[],this.faces=[],this.materials=[]}return _inherits(b,a),b}(d);b.exports=f},{"./Entity":19}],23:[function(a,b,c){var d=a("./gl"),e=a("./Texture"),f="image.texture",g=!1,h=!1,i=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,e=void 0===c?f:c,i=a.path,j=a.lod,k=a.components,l=a.format,m=a.magnification,n=a.minification,o=a.S,p=a.T,q=a.anisotropy,r=void 0===q?g:q,s=a.mipmap,t=void 0===s?h:s;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:e,lod:j,components:k,format:l,magnification:m,minification:n,S:o,T:p}),this.image=new Image,this.anisotropicFilter=d.getExtension("EXT_texture_filter_anisotropic"),this.anisotropy=r,this.mipmap=t,this.inheritance=["Entity","Texture","ImageTexture"],this.fetch(i)}return _inherits(b,a),_createClass(b,[{key:"fetch",value:function(a){var b=this.image;b.src=a,b.onload=this.configure.bind(this)}},{key:"configure",value:function(){_get(Object.getPrototypeOf(b.prototype),"configure",this).call(this);var a=this.components,c=this.anisotropy;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!0),c&&d.texParameterf(d.TEXTURE_2D,this.anisotropicFilter.TEXTURE_MAX_ANISOTROPY_EXT,c),d.texImage2D(d.TEXTURE_2D,this.lod,a,a,this.format,this.image),this.mipmap&&d.generateMipmap(d.TEXTURE_2D),this.unbind()}},{key:"image",get:function(){return this._image},set:function(a){this._image=a}},{key:"anisotropicFilter",get:function(){return this._anisotropicFilter},set:function(a){this._anisotropicFilter=a}},{key:"anisotropy",get:function(){return this._anisotropy},set:function(a){var b=this.anisotropicFilter;if(b&&a!==!1){var c=d.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT);a=Math.min(a,Math.max(a,c))}else a=0;this._anisotropy=a}},{key:"mipmap",get:function(){return this._mipmap},set:function(a){this._mipmap=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=i},{"./Texture":41,"./gl":46}],24:[function(a,b,c){var d=a("./utils/LSL"),e=a("./Structure"),f="light",g="light",h=["vec3 ambient","vec3 diffuse","vec3 specular","f intensity","vec3 location","i type"],i=0,j=16777215,k=16777215,l=1,m=[0,0,0],n=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,e=a.path,n=void 0===e?g:e,o=a.uniforms,p=void 0===o?h:o,q=a.ambient,r=void 0===q?i:q,s=a.diffuse,t=void 0===s?j:s,u=a.specular,v=void 0===u?k:u,w=a.intensity,x=void 0===w?l:w,y=a.location,z=void 0===y?m:y;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:n,uniforms:p}),this.ambient=r,this.diffuse=t,this.specular=v,this.intensity=x,this.location=z,this.type=0,this.inheritance=["Entity","Structure","Light"]}return _inherits(b,a),_createClass(b,[{key:"ambient",get:function(){return this._ambient},set:function(a){this._ambient=d(a)}},{key:"diffuse",get:function(){return this._diffuse},set:function(a){this._diffuse=d(a)}},{key:"specular",get:function(){return this._specular},set:function(a){this._specular=d(a)}},{key:"intensity",get:function(){return this._intensity},set:function(a){this._intensity=a}},{key:"location",get:function(){return this._location},set:function(a){this._location=a}},{key:"type",get:function(){return this._type},set:function(a){this._type=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=n},{"./Structure":40,"./utils/LSL":56}],25:[function(a,b,c){var d=a("./utils/LSL"),e=a("./Structure"),f={flat:1,smooth:0},g="material",h="material",i=["sampler image","vec3 ambient","vec3 diffuse","i shading","i type"],j={},k=16777215,l=16777215,m="smooth",n=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?g:c,e=a.path,n=void 0===e?h:e,o=a.uniforms,p=void 0===o?i:o,q=a.pattern,r=void 0===q?j:q,s=a.ambient,t=void 0===s?k:s,u=a.diffuse,v=void 0===u?l:u,w=a.shading,x=void 0===w?m:w;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:n,uniforms:p}),this.ambient=t,this.diffuse=v,this.image=r.unit,this.shading=f[x],this.pattern=r,this.type=0,this.inheritance=["Entity","Structure","Material"]}return _inherits(b,a),_createClass(b,[{key:"bind",value:function(a){_get(Object.getPrototypeOf(b.prototype),"bind",this).call(this,a),void 0!==this.image&&this.pattern.bind()}},{key:"unbind",value:function(){_get(Object.getPrototypeOf(b.prototype),"unbind",this).call(this),void 0!==this.image&&this.pattern.unbind()}},{key:"ambient",get:function(){return this._ambient},set:function(a){this._ambient=d(a)}},{key:"diffuse",get:function(){return this._diffuse},set:function(a){this._diffuse=d(a)}},{key:"image",get:function(){return this._image},set:function(a){this._image=a}},{key:"shading",get:function(){return this._shading},set:function(a){this._shading=f[a]}},{key:"pattern",get:function(){return this._pattern},set:function(a){this._pattern=a}},{key:"type",get:function(){return this._type},set:function(a){this._type=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=n},{"./Structure":40,"./utils/LSL":56}],26:[function(a,b,c){var d=a("./gl"),e=a("./Entity"),f=a("./VertexArrayObject"),g={vertices:"position",colors:"color",uvs:"uv",normals:"normal"},h="mesh",i=[],j=[],k=[],l=[],m=[],n=d.STATIC_DRAW,o=d.TRIANGLES,p=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?h:c,e=a.buffers,f=a.loader,g=a.vertices,p=void 0===g?i:g,q=a.colors,r=void 0===q?j:q,s=a.uvs,t=void 0===s?k:s,u=a.normals,v=void 0===u?l:u,w=a.indices,x=void 0===w?m:w,y=a.usage,z=void 0===y?n:y,A=a.primitive,B=void 0===A?o:A,C=a.material;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.buffers=e,this.vertices=p,this.colors=r,this.uvs=t,this.normals=v,this.indices=x,this.usage=z,this.primitive=B,this.material=C,this.scale=[1,1,1],this.rotation=0,this.translation=[0,0,0],this.inheritance=["Entity","Mesh"],this.unpack(f),this.generate(),this.configure()}return _inherits(b,a),_createClass(b,[{key:"unpack",value:function(a){void 0!==a&&(this.vertices=a.vertices,this.colors=a.colors,this.uvs=a.uvs,this.normals=a.normals,this.indices=a.indices)}},{key:"generate",value:function(){if(void 0===this.buffers){var a=[],b=this.indices.length>0;for(var c in g){var d=this[c];d.length>0&&a.push("vec"+d[0].length+" "+g[c])}this.buffers=new f({attributes:a,indexed:b})}}},{key:"configure",value:function(){var a=this.buffers,b=this.usage,c=[],e=this.vertices;if(e.map(this.interleave.bind(this,c)),a.bind(),d.bufferData(d.ARRAY_BUFFER,new a.view(c),b),a.indexed){var f=this.indices;d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,b),this.count=f.length}else this.count=e.length;a.unbind()}},{key:"interleave",value:function(a,b,c){var d=this.colors[c]||[],e=this.uvs[c]||[],f=this.normals[c]||[],g=[].concat(b,d,e,f);[].push.apply(a,g.map(parseFloat))}},{key:"draw",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=a.program,c=a.primitive,e=void 0===c?this.primitive:c,f=a.offset,g=void 0===f?0:f,h=a.count,i=void 0===h?this.count:h,j=this.buffers;j.bind(b),j.indexed?d.drawElements(e,i,d.UNSIGNED_SHORT,g):d.drawArrays(e,g,i),j.unbind()}},{key:"buffers",get:function(){return this._buffers},set:function(a){this._buffers=a}},{key:"vertices",get:function(){return this._vertices},set:function(a){this._vertices=a}},{key:"colors",get:function(){return this._colors},set:function(a){this._colors=a}},{key:"uvs",get:function(){return this._uvs},set:function(a){this._uvs=a}},{key:"normals",get:function(){return this._normals},set:function(a){this._normals=a}},{key:"indices",get:function(){return this._indices},set:function(a){this._indices=new Uint16Array(a)}},{key:"usage",get:function(){return this._usage},set:function(a){this._usage=a}},{key:"primitive",get:function(){return this._primitive},set:function(a){this._primitive=a}},{key:"material",get:function(){return this._material},set:function(a){this._material=a}},{key:"scale",get:function(){return this._scale},set:function(a){this._scale=a}},{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a}},{key:"translation",get:function(){return this._translation},set:function(a){this._translation=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=p},{"./Entity":19,"./VertexArrayObject":43,"./gl":46}],27:[function(a,b,c){var d=a("./utils/ajax"),e=a("./Entity"),f="mesh.loader",g=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,e=a.path;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.request=void 0,this.vertices=[],this.colors=[],this.uvs=[],this.normals=[],this.tmp={vertices:[],colors:[],uvs:[],normals:[]},this.indices=[],this.inheritance=["Entity","MeshLoader"],this.fetch(e)}return _inherits(b,a),_createClass(b,[{key:"fetch",value:function(a){this.request=d(a).then(this.parse.bind(this)).then(this.flush.bind(this))}},{key:"flush",value:function(){delete this.tmp}},{key:"request",get:function(){return this._request},set:function(a){this._request=a}},{key:"vertices",get:function(){return this._vertices},set:function(a){this._vertices=a}},{key:"colors",get:function(){return this._colors},set:function(a){this._colors=a}},{key:"uvs",get:function(){return this._uvs},set:function(a){this._uvs=a}},{key:"normals",get:function(){return this._normals},set:function(a){this._normals=a}},{key:"indices",get:function(){return this._indices},set:function(a){this._indices=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=g},{"./Entity":19,"./utils/ajax":57}],28:[function(a,b,c){var d=a("./MeshLoader"),e="obj.mesh.loader",f=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c,f=a.path;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:f}),this.inheritance=["Entity","MeshLoader","OBJMeshLoader"]}return _inherits(b,a),_createClass(b,[{key:"parse",value:function(a){a.split("\n").map(this.categorise.bind(this))}},{key:"categorise",value:function(a){var b=a.split(" "),c=b.shift();switch(c){case"v":this.tmp.vertices.push(b);break;case"vt":this.tmp.uvs.push(b);break;case"vn":this.tmp.normals.push(b);break;case"f":b.map(this.recategorise.bind(this))}}},{key:"recategorise",value:function(a){var b=a.split("/").map(function(a){return a-1}),c=this.tmp,d=c.vertices[b[0]],e=c.uvs[b[1]],f=c.normals[b[2]];void 0!==d&&this.vertices.push(d),void 0!==e&&this.uvs.push(e),void 0!==f&&this.normals.push(f)}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=f},{"./MeshLoader":27}],29:[function(a,b,c){var d=a("./gl"),e=a("gl-matrix"),f=e.mat4,g=a("./Camera"),h="orthographic.camera",i=-1,j=-1,k=.1,l=1,m=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?h:c,e=a.path,f=a.uniforms,g=a.background,m=a.left,n=void 0===m?i:m,o=a.right,p=a.bottom,q=void 0===p?j:p,r=a.top,s=a.near,t=void 0===s?k:s,u=a.far,v=void 0===u?l:u;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:e,uniforms:f,background:g}),this.left=n,this.right=o,this.bottom=q,this.top=r,this.near=t,this.far=v,this.inheritance=["Entity","Structure","Camera","OrthographicCamera"],this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){_get(Object.getPrototypeOf(b.prototype),"configure",this).call(this),f.ortho(this.projectionMatrix,this.left,this.right,this.bottom,this.top,this.near,this.far),f.identity(this.modelViewMatrix)}},{key:"bind",value:function(a){_get(Object.getPrototypeOf(b.prototype),"bind",this).call(this,a),d.disable(d.DEPTH_TEST),d.viewport(0,0,this.right,this.top)}},{key:"left",get:function(){return this._left},set:function(a){this._left=a}},{key:"right",get:function(){return this._right},set:function(a){this._right=a}},{key:"bottom",get:function(){return this._bottom},set:function(a){this._bottom=a}},{key:"top",get:function(){return this._top},set:function(a){this._top=a}},{key:"near",get:function(){return this._near},set:function(a){this._near=a}},{key:"far",get:function(){return this._far},set:function(a){this._far=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(g);b.exports=m},{"./Camera":13,"./gl":46,"gl-matrix":1}],30:[function(a,b,c){var d=a("./gl"),e=a("gl-matrix"),f=e.mat4,g=a("./Camera"),h="perspective.camera",i=d.canvas.width,j=d.canvas.height,k=45,l=.1,m=1e3,n=[0,0,0],o=[0,1,0],p=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?h:c,e=a.path,f=a.uniforms,g=a.background,p=a.width,q=void 0===p?i:p,r=a.height,s=void 0===r?j:r,t=a.fov,u=void 0===t?k:t,v=a.near,w=void 0===v?l:v,x=a.far,y=void 0===x?m:x,z=a.direction,A=void 0===z?n:z,B=a.location,C=a.up,D=void 0===C?o:C;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:e,uniforms:f,background:g}),this.width=q,this.height=s,this.fov=u,this.ratio=q/s,this.near=w,this.far=y,this.direction=A,this.location=B,this.up=D,this.inheritance=["Entity","Structure","Camera","PerspectiveCamera"],this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){_get(Object.getPrototypeOf(b.prototype),"configure",this).call(this);var a=this.modelViewMatrix;d.clearDepth(1),d.depthFunc(d.LEQUAL),f.perspective(this.projectionMatrix,this.fov,this.ratio,this.near,this.far),f.identity(a),f.lookAt(a,this.location,this.direction,this.up)}},{key:"bind",value:function(a){_get(Object.getPrototypeOf(b.prototype),"bind",this).call(this,a),d.enable(d.DEPTH_TEST),d.viewport(0,0,this.width,this.height)}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}},{key:"fov",get:function(){return this._fov},set:function(a){this._fov=a}},{key:"ratio",get:function(){return this._ratio},set:function(a){this._ratio=a}},{key:"near",get:function(){return this._near},set:function(a){this._near=a}},{key:"far",get:function(){return this._far},set:function(a){this._far=a}},{key:"direction",get:function(){return this._direction},set:function(a){this._direction=a}},{key:"location",get:function(){return this._location},set:function(a){this._location=a}},{key:"up",get:function(){return this._up},set:function(a){this._up=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(g);b.exports=p},{"./Camera":13,"./gl":46,"gl-matrix":1}],31:[function(a,b,c){var d=a("./utils/LSL"),e=a("./Material"),f="phong.material",g=["sampler image","vec3 ambient","vec3 diffuse","vec3 specular","f shininess","i shading","i type"],h=[1,1,1],i=75,j=function(a){
function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,e=a.path,j=a.uniforms,k=void 0===j?g:j,l=a.pattern,m=a.ambient,n=a.diffuse,o=a.specular,p=void 0===o?h:o,q=a.shading,r=a.shininess,s=void 0===r?i:r;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:e,uniforms:k,pattern:l,ambient:m,diffuse:n,shading:q}),this.specular=p,this.shininess=s,this.type=1,this.inheritance=["Entity","Structure","Material","PhongMaterial"]}return _inherits(b,a),_createClass(b,[{key:"specular",get:function(){return this._specular},set:function(a){this._specular=d(a)}},{key:"shininess",get:function(){return this._shininess},set:function(a){this._shininess=a}},{key:"type",get:function(){return this._type},set:function(a){this._type=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=j},{"./Material":25,"./utils/LSL":56}],32:[function(a,b,c){var d=a("./Light"),e="point.light",f=["vec3 ambient","vec3 diffuse","vec3 specular","f radius","f intensity","vec3 location","i type"],g=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c,g=a.path,h=a.uniforms,i=void 0===h?f:h,j=a.ambient,k=a.diffuse,l=a.specular,m=a.radius,n=a.intensity,o=a.location;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:g,uniforms:i,ambient:j,diffuse:k,specular:l,intensity:n,location:o}),this.radius=m,this.type=2,this.inheritance=["Entity","Structure","Light","PointLight"]}return _inherits(b,a),_createClass(b,[{key:"radius",get:function(){return this._radius},set:function(a){this._radius=a}},{key:"type",get:function(){return this._type},set:function(a){this._type=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=g},{"./Light":24}],33:[function(a,b,c){var d=a("./gl"),e=a("./Entity"),f=a("./VertexShader"),g=a("./FragmentShader"),h="program",i=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,e=void 0===c?h:c,i=a.selector;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:e}),this.buffer=d.createProgram(),this.vertexShader=new f({selector:i}),this.fragmentShader=new g({selector:i}),this.inheritance=["Entity","Program"],this.link()}return _inherits(b,a),_createClass(b,[{key:"link",value:function(){var a=this.buffer;d.attachShader(a,this.vertexShader.buffer),d.attachShader(a,this.fragmentShader.buffer),d.linkProgram(a),this.check()}},{key:"bind",value:function(){d.useProgram(this.buffer)}},{key:"check",value:function(){var a=this.buffer,b=d.getProgramParameter(a,d.LINK_STATUS),c=d.isContextLost();if(!b&&!c){var e=d.getProgramInfoLog(a);throw d.deleteProgram(a),new Error(e)}}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"vertexShader",get:function(){return this._vertexShader},set:function(a){this._vertexShader=a}},{key:"fragmentShader",get:function(){return this._fragmentShader},set:function(a){this._fragmentShader=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=i},{"./Entity":19,"./FragmentShader":20,"./VertexShader":44,"./gl":46}],34:[function(a,b,c){var d=a("./gl"),e=a("./Entity"),f="renderbuffer",g=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,e=void 0===c?f:c,g=a.width,h=a.height;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:e}),this.buffer=d.createRenderbuffer(),this.width=g,this.height=h,this.inheritance=["Entity","Renderbuffer"],this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){this.bind(),d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,this.width,this.height),this.unbind()}},{key:"bind",value:function(){d.bindRenderbuffer(d.RENDERBUFFER,this.buffer)}},{key:"unbind",value:function(){d.bindRenderbuffer(d.RENDERBUFFER,null)}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=g},{"./Entity":19,"./gl":46}],35:[function(a,b,c){var d=a("./Entity"),e="renderer",f=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d})}return _inherits(b,a),b}(d);b.exports=f},{"./Entity":19}],36:[function(a,b,c){var d=a("./Entity"),e="scene",f=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.program=void 0,this.meshes=[],this.lights=[],this.scale=[1,1,1],this.rotation=0,this.translation=[0,0,0],this.inheritance=["Entity","Scene"]}return _inherits(b,a),_createClass(b,[{key:"use",value:function(a){a.bind(),this.program=a}},{key:"put",value:function(a){switch(!0){case a.isType("Mesh"):this.meshes.push(a);break;case a.isType("Light"):this.lights.push(a);break;default:console.warn(a.name+" disallowed in scene")}}},{key:"animate",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],d=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e=this.animate.bind(this,a,b,c,d);this.render.apply(this,arguments),requestAnimationFrame(e)}},{key:"render",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],d=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];a.bind(),c&&c(),b.save(),b.scale.apply(b,this.scale),b.rotate(this.rotation),b.translate.apply(b,this.translation),this.lights.map(this.binder.bind(this)),this.meshes.map(this.draw.bind(this,b)),b.restore(),d&&d(),a.unbind()}},{key:"draw",value:function(a,b){var c=this.program,d=b.material;a.save(),a.scale.apply(a,b.scale),a.rotate(b.rotation),a.translate.apply(a,b.translation),a.bind(c),d.bind(c),b.draw({program:c}),d.unbind(),a.restore()}},{key:"binder",value:function(a){a.bind(this.program)}},{key:"program",get:function(){return this._program},set:function(a){this._program=a}},{key:"meshes",get:function(){return this._meshes},set:function(a){this._meshes=a}},{key:"lights",get:function(){return this._lights},set:function(a){this._lights=a}},{key:"scale",get:function(){return this._scale},set:function(a){this._scale=a}},{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a}},{key:"translation",get:function(){return this._translation},set:function(a){this._translation=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=f},{"./Entity":19}],37:[function(a,b,c){var d=a("./gl"),e=(a("./utils/ajax"),a("./Entity")),f=a("./shaders/shaders"),g="shader",h=function(a){function b(a,c){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],f=e.name,h=void 0===f?g:f,i=e.selector;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:h}),this.buffer=d.createShader(d[c]),this.inheritance=["Entity","Shader"],this.compile(c,i)}return _inherits(b,a),_createClass(b,[{key:"generate",value:function(a,b){var c=document.querySelector(b).textContent;for(var d in f)c=c.replace("@"+d+";",f[d][a]);return c}},{key:"compile",value:function(a,b){var c=this.buffer,e=this.generate(a,b);d.shaderSource(c,e),d.compileShader(c),this.check()}},{key:"check",value:function(){var a=this.buffer,b=d.getShaderParameter(a,d.COMPILE_STATUS),c=d.isContextLost();if(!b&&!c){var e=d.getShaderInfoLog(a);throw d.deleteShader(a),new Error(e)}}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=h},{"./Entity":19,"./gl":46,"./shaders/shaders":55,"./utils/ajax":57}],38:[function(a,b,c){var d=a("./gl"),e=a("./Structure"),f=a("./DataTexture"),g=a("./DepthTexture"),h=a("./DepthFramebuffer"),i="shadow.map",j=["sampler shadowMap"],k=d.canvas.width,l=d.canvas.height,m=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?i:c,e=a.path,m=a.uniforms,n=void 0===m?j:m,o=a.width,p=void 0===o?k:o,q=a.height,r=void 0===q?l:q;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:e,uniforms:n}),this.colorAttachment=new f({width:p,height:r}),this.depthAttachment=new g({width:p,height:r}),this.view=new h({colorAttachment:this.colorAttachment,depthAttachment:this.depthAttachment}),this.shadowMap=this.depthAttachment.unit,this.inheritance=["Entity","Structure","ShadowMapper"]}return _inherits(b,a),_createClass(b,[{key:"bind",value:function(a){_get(Object.getPrototypeOf(b.prototype),"bind",this).call(this,a),this.depthAttachment.bind()}},{key:"unbind",value:function(){this.depthAttachment.unbind()}},{key:"colorAttachment",get:function(){return this._colorAttachment},set:function(a){this._colorAttachment=a}},{key:"depthAttachment",get:function(){return this._depthAttachment},set:function(a){this._depthAttachment=a}},{key:"view",get:function(){return this._view},set:function(a){this._view=a}},{key:"shadowMap",get:function(){return this._shadowMap},set:function(a){this._shadowMap=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=m},{"./DataTexture":14,"./DepthFramebuffer":16,"./DepthTexture":17,"./Structure":40,"./gl":46}],39:[function(a,b,c){var d=a("./Light"),e="spot.light",f=["vec3 ambient","vec3 diffuse","vec3 specular","vec3 attenuation","f exponent","f cutoff","f intensity","vec3 location","vec3 direction","i type"],g=[0,0,0],h=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?e:c,h=a.path,i=a.uniforms,j=void 0===i?f:i,k=a.ambient,l=a.diffuse,m=a.specular,n=a.attenuation,o=a.exponent,p=a.cutoff,q=a.intensity,r=a.location,s=a.direction,t=void 0===s?g:s;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,path:h,uniforms:j,ambient:k,diffuse:l,specular:m,intensity:q,location:r}),this.attenuation=n,this.exponent=o,this.cutoff=p,this.direction=t,this.type=3,this.inheritance=["Entity","Structure","Light","SpotLight"]}return _inherits(b,a),_createClass(b,[{key:"attenuation",get:function(){return this._attenuation},set:function(a){this._attenuation=a}},{key:"cutoff",get:function(){return this._cutoff},set:function(a){this._cutoff=a}},{key:"direction",get:function(){return this._direction},set:function(a){this._direction=a}},{key:"type",get:function(){return this._type},set:function(a){this._type=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=h},{"./Light":24}],40:[function(a,b,c){var d=a("./Entity"),e=a("./Uniform"),f="structure",g=[],h=function(a){function b(a){var c=a.name,d=void 0===c?f:c,e=a.path,h=a.uniforms,i=void 0===h?g:h;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.path=e,this.uniforms=i,this.inheritance=["Entity","Structure"]}return _inherits(b,a),_createClass(b,[{key:"instantiate",value:function(a){var b=a.split(" "),c=b[0],d=b[1];return new e({path:this.path,uniform:d,format:c})}},{key:"bind",value:function(a){this.uniforms.map(this.set.bind(this,a))}},{key:"unbind",value:function(){}},{key:"set",value:function(a,b){b.set(a,this[b.uniform])}},{key:"path",get:function(){return this._path},set:function(a){this._path=a}},{key:"uniforms",get:function(){return this._uniforms},set:function(a){this._uniforms=a.map(this.instantiate.bind(this))}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=h},{"./Entity":19,"./Uniform":42}],41:[function(a,b,c){var d=a("./Entity"),e=a("./gl"),f=0,g="texture",h=0,i=e.RGBA,j=e.UNSIGNED_BYTE,k=e.NEAREST,l=e.NEAREST,m=e.CLAMP_TO_EDGE,n=e.CLAMP_TO_EDGE,o=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?g:c,o=a.lod,p=void 0===o?h:o,q=a.components,r=void 0===q?i:q,s=a.format,t=void 0===s?j:s,u=a.magnification,v=void 0===u?k:u,w=a.minification,x=void 0===w?l:w,y=a.S,z=void 0===y?m:y,A=a.T,B=void 0===A?n:A;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.buffer=e.createTexture(),this.lod=p,this.components=r,this.format=t,this.magnification=v,this.minification=x,this.S=z,this.T=B,this.unit=f++,this.inheritance=["Entity","Texture"]}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this.magnification),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.minification),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.S),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.T)}},{key:"bind",value:function(){var a=e.TEXTURE0+this.unit;e.activeTexture(a),e.bindTexture(e.TEXTURE_2D,this.buffer)}},{key:"unbind",value:function(){e.bindTexture(e.TEXTURE_2D,null)}},{key:"buffer",get:function(){return this._buffer},set:function(a){this._buffer=a}},{key:"lod",get:function(){return this._lod},set:function(a){this._lod=a}},{key:"components",get:function(){return this._components},set:function(a){this._components=a}},{key:"format",get:function(){return this._format},set:function(a){this._format=a}},{key:"magnification",get:function(){return this._magnification},set:function(a){this._magnification=a}},{key:"minification",get:function(){return this._minification},set:function(a){this._minification=a}},{key:"S",get:function(){return this._S},set:function(a){this._S=a}},{key:"T",get:function(){return this._T},set:function(a){this._T=a}},{key:"unit",get:function(){return this._unit},set:function(a){this._unit=a}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=o},{"./Entity":19,"./gl":46}],42:[function(a,b,c){var d=a("./gl"),e=a("./Entity"),f={i:"1i",ivec2:"2iv",ivec3:"3iv",ivec4:"4iv",f:"1f",vec2:"2fv",vec3:"3fv",vec4:"4fv",mat2:"Matrix2fv",mat3:"Matrix3fv",mat4:"Matrix4fv",sampler:"1i"},g="uniform",h=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?g:c,e=a.path,f=a.uniform,h=a.format;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d}),this.path=e,this.uniform=f,this.location=void 0,this.format=h,this.method=h,this.inheritance=["Entity","Uniform"]}return _inherits(b,a),_createClass(b,[{key:"locate",value:function(a){var b=this.path,c=this.uniform;return"sampler"!==this.format&&void 0!==b&&(c=[b,c].join(".")),this.location=d.getUniformLocation(a.buffer,"u_"+c)}},{key:"set",value:function(a,b){var c=this.locate(a),e=this.method;null!==e.match("Matrix")?d[e](c,!1,b):d[e](c,b)}},{key:"path",get:function(){return this._path},set:function(a){this._path=a}},{key:"uniform",get:function(){return this._uniform},set:function(a){this._uniform=a}},{key:"location",get:function(){return this._location},set:function(a){this._location=a}},{key:"format",get:function(){return this._format},set:function(a){this._format=a}},{key:"method",get:function(){return this._method},set:function(a){this._method="uniform"+f[a]}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=h},{"./Entity":19,"./gl":46}],43:[function(a,b,c){var d=a("./gl"),e=a("./Entity"),f=a("./Attribute"),g={i:1,f:1,vec2:2,vec3:3,vec4:4},h="vertex.array.object",i=!1,j=Float32Array,k=[],l=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,e=void 0===c?h:c,f=a.indexed,g=void 0===f?i:f,l=a.view,m=void 0===l?j:l,n=a.attributes,o=void 0===n?k:n;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:e}),this.primary=d.createBuffer(),this.secondary=void 0,this.indexed=g,this.stride=0,this.view=m,this.attributes=o,this.inheritance=["Entity","VertexArrayObject"],this.configure()}return _inherits(b,a),_createClass(b,[{key:"configure",value:function(){this.indexed&&(this.secondary=d.createBuffer())}},{key:"generate",value:function(a){var b=this.stride,c=a.split(" "),d=g[c[0]],e=c[1],h=new f({attribute:e,length:d,offset:b});return this.stride+=h.getByteCount(this.view.BYTES_PER_ELEMENT),h}},{key:"enable",value:function(a,b){b.enable(a,this.stride)}},{key:"disable",value:function(a){a.disable()}},{key:"bind",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];d.bindBuffer(d.ARRAY_BUFFER,this.primary),this.indexed&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.secondary),a&&this.attributes.map(this.enable.bind(this,a))}},{key:"unbind",value:function(){d.bindBuffer(d.ARRAY_BUFFER,null),this.indexed&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null),this.attributes.map(this.disable)}},{key:"primary",get:function(){return this._primary},set:function(a){this._primary=a}},{key:"secondary",get:function(){return this._secondary},set:function(a){this._secondary=a}},{key:"indexed",get:function(){return this._indexed},set:function(a){this._indexed=a}},{key:"stride",get:function(){return this._stride},set:function(a){this._stride=a}},{key:"view",get:function(){return this._view},set:function(a){this._view=a}},{key:"attributes",get:function(){return this._attributes},set:function(a){this._attributes=a.map(this.generate.bind(this))}},{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(e);b.exports=l},{"./Attribute":11,"./Entity":19,"./gl":46}],44:[function(a,b,c){var d=(a("./gl"),a("./Shader")),e="x-shader/x-vertex",f="vertex.shader",g="VERTEX_SHADER",h=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],c=a.name,d=void 0===c?f:c,h=a.selector;_classCallCheck(this,b),_get(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,{name:d,selector:h+'[type="'+e+'"]'},g),this.inheritance=["Entity","Shader","VertexShader"]}return _inherits(b,a),_createClass(b,[{key:"inheritance",get:function(){return this._inheritance},set:function(a){this._inheritance=a}}]),b}(d);b.exports=h},{"./Shader":37,"./gl":46}],45:[function(a,b,c){var d={glm:a("gl-matrix"),gl:a("./gl"),Entity:a("./Entity"),Attribute:a("./Attribute"),Camera:a("./Camera"),OrthographicCamera:a("./OrthographicCamera"),PerspectiveCamera:a("./PerspectiveCamera"),Framebuffer:a("./Framebuffer"),DeferredFramebuffer:a("./DeferredFramebuffer"),DepthFramebuffer:a("./DepthFramebuffer"),Light:a("./Light"),DirectionalLight:a("./DirectionalLight"),PointLight:a("./PointLight"),SpotLight:a("./SpotLight"),Material:a("./Material"),PhongMaterial:a("./PhongMaterial"),Mesh:a("./Mesh"),MeshLoader:a("./MeshLoader"),OBJMeshLoader:a("./OBJMeshLoader"),Program:a("./Program"),Renderbuffer:a("./Renderbuffer"),Scene:a("./Scene"),Shader:a("./Shader"),FragmentShader:a("./FragmentShader"),VertexShader:a("./VertexShader"),ShadowMapper:a("./ShadowMapper"),Structure:a("./Structure"),Texture:a("./Texture"),DataTexture:a("./DataTexture"),DepthTexture:a("./DepthTexture"),ImageTexture:a("./ImageTexture"),Uniform:a("./Uniform"),VertexArrayObject:a("./VertexArrayObject")};b.exports=window.Four=d},{"./Attribute":11,"./Camera":13,"./DataTexture":14,"./DeferredFramebuffer":15,"./DepthFramebuffer":16,"./DepthTexture":17,"./DirectionalLight":18,"./Entity":19,"./FragmentShader":20,"./Framebuffer":21,"./ImageTexture":23,"./Light":24,"./Material":25,"./Mesh":26,"./MeshLoader":27,"./OBJMeshLoader":28,"./OrthographicCamera":29,"./PerspectiveCamera":30,"./PhongMaterial":31,"./PointLight":32,"./Program":33,"./Renderbuffer":34,"./Scene":36,"./Shader":37,"./ShadowMapper":38,"./SpotLight":39,"./Structure":40,"./Texture":41,"./Uniform":42,"./VertexArrayObject":43,"./VertexShader":44,"./gl":46,"gl-matrix":1}],46:[function(a,b,c){function d(){var a=document.querySelector("canvas"),b=window.devicePixelRatio,c=parseFloat(a.getAttribute("width"))||window.innerWidth,d=parseFloat(a.getAttribute("height"))||window.innerHeight;return a.setAttribute("width",c*b),a.setAttribute("height",d*b),a.style.width=c,a.style.height=d,a}function e(a){return f.getContext(a)}var f=d(),g=e("webgl")||e("experimental-webgl");b.exports=g},{}],47:[function(a,b,c){var d=[].join("\n"),e=["vec3 ambientLight(Light light, Material material, vec4 position, vec3 normal, vec3 base)","{","   vec3 direction = normalize(light.location - position.xyz);","   float weight = max(dot(direction, normal), 0.0);","   vec3 ambient = light.ambient * material.ambient;","   vec3 diffuse = light.intensity * light.diffuse * (material.diffuse + base) * weight;","   vec3 specular = vec3(0.0);","   if (material.type == 1 && weight > 0.0)","   {","      specular = light.specular * material.specular * pow(max(dot(reflect(-direction, normal), normalize(-position.xyz)), 0.0), material.shininess);","   }","   return ambient + diffuse + specular;","}"].join("\n");b.exports={VERTEX_SHADER:d,FRAGMENT_SHADER:e}},{}],48:[function(a,b,c){var d=["struct Camera","{","   mat4 projectionMatrix;","   mat4 modelViewMatrix;","   mat3 normalMatrix;","};"].join("\n"),e=[].join("\n");b.exports={VERTEX_SHADER:d,FRAGMENT_SHADER:e}},{}],49:[function(a,b,c){var d=[].join("\n"),e=[].join("\n");b.exports={VERTEX_SHADER:d,FRAGMENT_SHADER:e}},{}],50:[function(a,b,c){var d=[].join("\n"),e=["struct Light","{","   vec3 ambient;","   vec3 diffuse;","   vec3 specular;","   float radius;","   float intensity;","   vec3 location;","   int type;","};"].join("\n");b.exports={VERTEX_SHADER:d,FRAGMENT_SHADER:e}},{}],51:[function(a,b,c){var d=[].join("\n"),e=["struct Material","{","   int image;","   vec3 ambient;","   vec3 diffuse;","   vec3 specular;","   float shininess;","   int shading;","   int type;","};","uniform sampler2D u_image;"].join("\n");b.exports={VERTEX_SHADER:d,FRAGMENT_SHADER:e}},{}],52:[function(a,b,c){var d=[].join("\n"),e=["vec3 pointLight(Light light, Material material, vec4 position, vec3 normal)","{","   normal = normalize(normal);","   vec3 pointToLight = light.location - position.xyz;","   vec3 direction = normalize(pointToLight);","   float weight = max(dot(normal, direction), 0.0);","   vec3 ambient = light.ambient * material.ambient;","   vec3 diffuse = light.diffuse * material.diffuse * weight;","   vec3 specular = vec3(0.0);","   if (material.type == 1)","   {","      if (weight > 0.0)","      {","         vec3 eye = normalize(-position.xyz);","         vec3 reflection = reflect(-direction, normal);","         specular = light.specular * material.specular * pow(max(dot(reflection, eye), 0.0), material.shininess);","      }","   }","   float distanceFromLight = length(pointToLight);","   float quadratic = pow(distanceFromLight / light.radius + 1.0, 2.0);","   float attenuation = light.intensity / quadratic;","   return ambient + (specular + diffuse) * attenuation;","}"].join("\n");b.exports={VERTEX_SHADER:d,FRAGMENT_SHADER:e}},{}],53:[function(a,b,c){var d=["const mat4 shadowMatrix = mat4(0.5, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.5, 0.5, 0.5, 1.0);","varying vec4 v_shadow;","void shadow(Camera camera, vec4 position)","{","   v_shadow = shadowMatrix * camera.projectionMatrix * camera.modelViewMatrix * position;","}"].join("\n"),e=["uniform sampler2D u_shadowMap;","varying vec4 v_shadow;","float visibility()","{","   vec3 depth = v_shadow.xyz / v_shadow.w;","   if (depth.x >= 0.0 && depth.x <= 1.0 && depth.y >= 0.0 && depth.y <= 1.0)","   {","      float shadow = texture2D(u_shadowMap, depth.xy).r;","      float biased = depth.z * 0.99995;","      if (shadow <= biased)","      {","          return 0.3;","      }","   }","   return 1.0;","}"].join("\n");b.exports={VERTEX_SHADER:d,FRAGMENT_SHADER:e}},{}],54:[function(a,b,c){arguments[4][49][0].apply(c,arguments)},{dup:49}],55:[function(a,b,c){var d={Camera:a("./Camera"),Light:a("./Light"),AmbientLight:a("./AmbientLight"),DirectionalLight:a("./DirectionalLight"),PointLight:a("./PointLight"),SpotLight:a("./SpotLight"),Material:a("./Material"),ShadowMapper:a("./ShadowMapper")};b.exports=d},{"./AmbientLight":47,"./Camera":48,"./DirectionalLight":49,"./Light":50,"./Material":51,"./PointLight":52,"./ShadowMapper":53,"./SpotLight":54}],56:[function(a,b,c){function d(a){var b=a>>16&255,c=a>>8&255,d=255&a;return b/=255,c/=255,d/=255,[b,c,d]}b.exports=d},{}],57:[function(a,b,c){function d(a){var b=arguments.length<=1||void 0===arguments[1]?"text/plain":arguments[1];return e(function(c,d){var e=new XMLHttpRequest;e.open("get",a),e.onload=function(){var b=e.status;if(200===b)c(e.response);else{var f=a+": "+e.statusText,g=new Error(f);d(g)}},e.setRequestHeader("contentType",b),e.send()})}var e=a("./promise");b.exports=d},{"./promise":58}],58:[function(a,b,c){function d(a){return new Promise(a)}b.exports=d},{}]},{},[11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58]);
//# sourceMappingURL=four.min.js.map