<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: MeshLoader.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: MeshLoader.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

let ajax = require('./utils/ajax');
let Entity = require('./Entity');

const _name = 'mesh.loader';

/**
 * A mesh loader is a mesh file parser that extracts the collections of vertices
 * and faces that define a shape. It may also include data to shade the mesh,
 * such as vertex colors, coordinates and per-vertex/face normals, depending
 * on the mesh file format.
 * @class MeshLoader
 * @name Entity.MeshLoader
 * @extends Entity
 * @param {string} [name=mesh.loader] - Specifies the entities friendly name.
 * @param {string} path - Specifies the relative path to the mesh file.
 */
class MeshLoader extends Entity
{
   constructor({ name = _name, path } = {})
   {
      super({ name });

      /**
       * The mesh loader xhr promise handler to help emulate synchronous
       * behaviour (callback execution).
       * @var {Promise} Entity.MeshLoader.request
       */
      this.request = undefined;

      /**
       * The mesh vertex positions.
       * @var {Array} [Entity.MeshLoader.vertices=[]]
       */
      this.vertices = [];

      /**
       * The mesh vertex texture mapping coordinates.
       * @var {Array} [Entity.MeshLoader.uvs=[]]
       */
      this.uvs = [];

      /**
       * The mesh vertex normals.
       * @var {Array} [Entity.MeshLoader.normals=[]]
       */
      this.normals = [];

      /**
       * A temporary storage buffer for the mesh data to assist
       * generating the mesh data arrays, if necessary.
       * This object is automatically deleted once the mesh data
       * has been allocated to their properties.
       * @var {object} [Entity.MeshLoader.tmp={ vertices: [], colors: [], uvs: [], normals: [] }]
       */
      this.tmp = {
         vertices: [],
         colors: [],
         uvs: [],
         normals: []
      };

      /**
       * The indices used to construct the primitives.
       * @var {Array} [Entity.MeshLoader.indices=[]]
       */
      this.indices = [];

      this.fetch(path);
   }

   /**
    * Asynchronously fetches the mesh file contents, parses it, and
    * subsequently deletes the `tmp` temporary storage buffer.
    * @function Entity.MeshLoader.fetch
    * @param {string} path - Specifies the relative path to the mesh file.
    * @returns {undefined}
    */
   fetch(path)
   {
      this.request = ajax(path).then(this.parse.bind(this)).then(this.flush.bind(this));
   }

   flush()
   {
      delete this.tmp;
   }
}

module.exports = MeshLoader;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Entity.html">Entity</a></li><li><a href="Entity.Attribute.html">Attribute</a></li><li><a href="Entity.Camera.html">Camera</a></li><li><a href="Entity.Camera.OrthographicCamera.html">OrthographicCamera</a></li><li><a href="Entity.Camera.PerspectiveCamera.html">PerspectiveCamera</a></li><li><a href="Entity.Fluid.html">Fluid</a></li><li><a href="Entity.Framebuffer.html">Framebuffer</a></li><li><a href="Entity.Framebuffer.DeferredFramebuffer.html">DeferredFramebuffer</a></li><li><a href="Entity.Mesh.html">Mesh</a></li><li><a href="Entity.MeshLoader.html">MeshLoader</a></li><li><a href="Entity.MeshLoader.OBJMeshLoader.html">OBJMeshLoader</a></li><li><a href="Entity.Program.html">Program</a></li><li><a href="Entity.Renderbuffer.html">Renderbuffer</a></li><li><a href="Entity.Renderer.html">Renderer</a></li><li><a href="Entity.Shader.html">Shader</a></li><li><a href="Entity.Shader.FragmentShader.html">FragmentShader</a></li><li><a href="Entity.Shader.VertexShader.html">VertexShader</a></li><li><a href="Entity.Structure.html">Structure</a></li><li><a href="Entity.Structure.Light.html">Light</a></li><li><a href="Entity.Structure.Light.DirectionalLight.html">DirectionalLight</a></li><li><a href="Entity.Structure.Light.PointLight.html">PointLight</a></li><li><a href="Entity.Structure.Light.SpotLight.html">SpotLight</a></li><li><a href="Entity.Structure.Material.html">Material</a></li><li><a href="Entity.Structure.Material.PhongMaterial.html">PhongMaterial</a></li><li><a href="Entity.Texture.html">Texture</a></li><li><a href="Entity.Texture.DataTexture.html">DataTexture</a></li><li><a href="Entity.Texture.ImageTexture.html">ImageTexture</a></li><li><a href="Entity.Uniform.html">Uniform</a></li><li><a href="Entity.VertexArrayObject.html">VertexArrayObject</a></li></ul><h3>Global</h3><ul><li><a href="global.html#uniform">uniform</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Tue Aug 11 2015 22:13:37 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
