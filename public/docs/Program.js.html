<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Program.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Program.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

let gl = require('./gl');
let Entity = require('./Entity');

const _name = 'program';

/**
 * A program is an object to which shader objects can be attached. This provides a mechanism to
 * specify the shader objects that will be linked to create a program. It also provides a means for checking
 * the compatibility of the shaders that will be used to create a program (for instance, checking the
 * compatibility between a vertex shader and a fragment shader).
 * @class Program
 * @name Entity.Program
 * @extends Entity
 * @param {string} [name=program] - Specifies the entities friendly name.
 * @param {Entity.Shader.VertexShader} vertexShader - Specifies the vertex shader.
 * @param {Entity.Shader.FragmentShader} fragmentShader - Specifies the fragment shader.
 */
class Program extends Entity
{
   constructor({ name = _name, vertexShader, fragmentShader })
   {
      super({ name });

      /**
       * The program to which the vertex and fragment shader will be attached.
       * @var {WebGLProgram} [Entity.Program.program=WebGLProgram]
       */
      this.buffer = gl.createProgram();

      /**
       * The vertex shader.
       * @var {Entity.Shader.VertexShader} Entity.Program.vertexShader
       */
      this.vertexShader = vertexShader;

      /**
       * The fragment shader.
       * @var {Entity.Shader.FragmentShader} Entity.Program.fragmentShader
       */
      this.fragmentShader = fragmentShader;

      this.link();
   }

   /**
    * Links the program by creating executables for the vertex and
    * fragment shader to run on the vertex and fragment processors,
    * respectively.
    * @function Entity.Program.link
    * @returns {undefined}
    */
   link()
   {
      let buffer = this.buffer;

      gl.attachShader(buffer, this.vertexShader.buffer);
      gl.attachShader(buffer, this.fragmentShader.buffer);

      gl.linkProgram(buffer);

      this.check();
   }

   /**
    * Installs the program as part of the current rendering state.
    * @function Entity.Program.bind
    * @returns {undefined}
    */
   bind()
   {
      gl.useProgram(this.buffer);
   }

   /**
    * Validates the link status of the program.
    * @function Entity.Program.check
    * @returns {undefined|Error}
    */
   check()
   {
      let buffer = this.buffer;
      let status = gl.getProgramParameter(buffer, gl.LINK_STATUS);
      let context = gl.isContextLost();

      if (!status &amp;&amp; !context)
      {
         let error = gl.getProgramInfoLog(buffer);

         gl.deleteProgram(buffer);

         throw new Error(error);
      }
   }
}

module.exports = Program;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Entity.html">Entity</a></li><li><a href="Entity.Attribute.html">Attribute</a></li><li><a href="Entity.Camera.html">Camera</a></li><li><a href="Entity.Camera.OrthographicCamera.html">OrthographicCamera</a></li><li><a href="Entity.Camera.PerspectiveCamera.html">PerspectiveCamera</a></li><li><a href="Entity.Fluid.html">Fluid</a></li><li><a href="Entity.Framebuffer.html">Framebuffer</a></li><li><a href="Entity.Framebuffer.DeferredFramebuffer.html">DeferredFramebuffer</a></li><li><a href="Entity.Mesh.html">Mesh</a></li><li><a href="Entity.MeshLoader.html">MeshLoader</a></li><li><a href="Entity.MeshLoader.OBJMeshLoader.html">OBJMeshLoader</a></li><li><a href="Entity.Program.html">Program</a></li><li><a href="Entity.Renderbuffer.html">Renderbuffer</a></li><li><a href="Entity.Renderer.html">Renderer</a></li><li><a href="Entity.Shader.html">Shader</a></li><li><a href="Entity.Shader.FragmentShader.html">FragmentShader</a></li><li><a href="Entity.Shader.VertexShader.html">VertexShader</a></li><li><a href="Entity.Structure.html">Structure</a></li><li><a href="Entity.Structure.Light.html">Light</a></li><li><a href="Entity.Structure.Light.DirectionalLight.html">DirectionalLight</a></li><li><a href="Entity.Structure.Light.PointLight.html">PointLight</a></li><li><a href="Entity.Structure.Light.SpotLight.html">SpotLight</a></li><li><a href="Entity.Structure.Material.html">Material</a></li><li><a href="Entity.Structure.Material.PhongMaterial.html">PhongMaterial</a></li><li><a href="Entity.Texture.html">Texture</a></li><li><a href="Entity.Texture.DataTexture.html">DataTexture</a></li><li><a href="Entity.Texture.ImageTexture.html">ImageTexture</a></li><li><a href="Entity.Uniform.html">Uniform</a></li><li><a href="Entity.VertexArrayObject.html">VertexArrayObject</a></li></ul><h3>Global</h3><ul><li><a href="global.html#uniform">uniform</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Tue Aug 11 2015 21:31:01 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
